<!DOCTYPE html>
<html lang="cs">
    <head>
      <meta charset="utlf-8"/>
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

      <link rel="stylesheet" type="text/css" href="/static/css/bootstrap.css">
      <script src="/static/js/svg_pencil.js"></script>
      <script src="/static/js/hierarchydiagram.js"></script>
      <script src="/static/js/genealogy.js"></script>
      
    </head>
    <body>
        <div class="container">
        	
        	<div class="jumbotron py-2 mt-4 text-center bg-success text-white">
        		<div class="display-4 font-weight-bold">Rodokmen</div>
        		<p class="lead">rodu <span class="font-weight-bold">Laštovičků</span></p>
        	</div>
        	<ul class="nav nav-tabs">
  				<li class="nav-item">
  					<a class="nav-link active lead" href="#familytree" data-toggle="tab">Rodokmen</a>
  				</li>
  				<li class="nav-item">
  					<a class="nav-link lead" href="#info" data-toggle="tab">Stručný popis rodu</a>
  				</li>
			</ul>

			<div class="tab-content">
				<div class="tab-pane active" id="familytree">
					
				</div>
				<div class="tab-pane" id="info">
					<div class="card w-25 mt-4">
						<div class="card-header bg-warning text-white">Hemeroidy</div>
						<div class="card-body">
							<h3 class="card-title">Co to je hemeroid</h3>
							<p class="card-text text-muted">Mit hemeroidy je pruser, at si kdo chce co chce rika....</p>
						</div>
					</div>
				</div>
			</div>

			<script type="text/javascript">

    (function() {

      var tata = Genealogy.newMale({
        name: "Jiri",
        surname: "Lastovicka",
        birth: {
          day: 16,
          month: 4,
          year: 1952
        }
      });

      var mama = Genealogy.newFemale({
        name: "Eva",
        surname: "Navratilova",
        birth: {
          day: 14,
          month: 9,
          year: 1951
        }
      });

      var ja = Genealogy.newMale({
        name: "Honza", 
        surname: "Laštovička", 
        birth: {
          day: 11,
          month: 11,
          year: 1983
        },
        hasImage: true
      });

      var monika = Genealogy.newFemale({
        name: "Monika",
        surname: "Laštovičková",
        birth: {
          day: 6,
          month: 6, 
          year: 1976
        }
      });

      tata.inRelationWith(mama).having(ja).having(monika).since({
        year: 1974
      });

      var babickaN = Genealogy.newFemale({
        name: "Eva",
        surname: "Hamplova",
        birth: {
          day: 28,
          month: 10,
          year: 1930
        }
      });

      var josefN = Genealogy.newMale({
        name: "Josef",
        surname: "Navratil",
        birth: {
          day: 11,
          month: 5,
          year: 1923
        },
        decease: {
          day: 25,
          month: 12,
          year: 1969
        }
      });

      josefN.inRelationWith(babickaN).having(mama);

      var babickaC = Genealogy.newFemale({
        name: "Marie",
        surname: "Leinmullerova",
        birth: {
          day: 14,
          month: 3,
          year: 1927
        },
        decease: {
          day: 14,
          month: 9,
          year: 2001
        }
      });

      dedaL = Genealogy.newMale({
        name: "Josef",
        surname: "Lastovicka",
        birth: {
          day: 16,
          month: 8,
          year: 1922
        },
        decease: {
          day: 19,
          month: 7,
          year: 1997
        }
      });


      babickaC.inRelationWith(dedaL).having(tata);

/*
      console.log(ja);
      console.log(monika);
      console.log(tata);
      console.log(mama);
*/
      
      var relationsStack = [];
      var allRelations = [];

      var topology = new Genealogy.internal.renderer.TopologyFactory();
      ja.walk(topology);
      console.log(topology.layers);
/*
      ja.walk({

        

        enter: function(individual) {
          //console.log("Vstupuju: " + individual.id);
          
          var triangle = {
              individual: individual,
              fatherTriangle: undefined,
              motherTriangle: undefined
          };


          if (relationsStack.length > 0) {
            let previousTriangle = [...relationsStack].pop();

            if (individual.isMale()) {
              previousTriangle.fatherTriangle = triangle;
            }

            if (individual.isFemale()) {
              previousTriangle.motherTriangle = triangle;
            }

          }

          relationsStack.push(triangle);
          allRelations.push(triangle);
        },

        leave: function(i) {
          //console.log("Opoustim:" + i.id);

          var vztah = relationsStack.pop();
          //stack.pop();

          //console.log(vztah);
        }
      });*/

      let tree = Genealogy.constructFamilyTree(ja, {
        width: "100%",
        height: "400"
      });

      document.querySelector("#familytree").appendChild(tree.el);

    })();
			
			</script>
    </body>
</html>